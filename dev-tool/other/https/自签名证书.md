# 自签名证书

常用扩展名:

* crt

    证书文件，可以是DER(二进制)编码的，也可以是PEM(base64)编码的

* cer

    证书文件

* csr

    证书签名请求。通常是生成请求后发给CA，CA签名后发回证书

* key

    密钥文件

* p12

    证书文件，包含X509证书和一个被密码保护的私钥



查看密钥信息

```
 openssl  rsa -inform PEM -noout -text -in server.key

 openssl  rsa -inform DER -noout -text -in server.key
```   
 

## 创建私有CA，使用CA进行证书签名

创建私有 CA ，然后用该 CA 给证书进行签名。CA证书就是一个自签名的证书

### 创建CA证书

1. 创建私钥

    ```
    openssl genrsa -out server.key 2048 
    // des3加密私钥 需要通过交互界面手动输入密码
    openssl genrsa -des3 -out server.key 2048
    // des3加密 指定密码
    openssl genrsa -des3 -passout pass:123456 -out server.pass.key 2048
    // 移除key中的密码保护
    openssl rsa -in server.key -out server.key
    ```

2. 生成自签名证书，CA证书需要自签名    
    
    ```
    openssl req -new -x509 -days 365 -key ca.key -out ca.crt
    ```

### 创建服务端证书

3. 创建私钥用于申请证书

    ```
    openssl genrsa -des3 -out server.key 4096
    ```

4. 生成CSR(Certificate Signing Request)，发送给CA签名

    ```
    openssl req -new -key server.key -out server.csr
    ```

5. 使用CA证书对CSR签名

    ```
    openssl x509 -req -days 365 -in server.csr -CA ca.crt -CAkey ca.key -set_serial 01 -out server.crt 
    ```


https://www.freecodecamp.org/news/openssl-command-cheatsheet-b441be1e8c4a/

https://studygolang.com/articles/23113