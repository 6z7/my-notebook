## map源码分析

map是一个hashtable,数据被保存到bucket数组中，每个bucket包含8个kv键值对.

hash的低阶位用于选择bucket,hash的高阶位用于区分同一个bucket中不同的kv

如果bucket中超过了8个kv，则通过链表的方式创建新的buket

当hashtable库容时，将bucket数组扩容2倍，bucket增量从旧的bucket数组数值到新的数组.
go会在每次读写Map时以桶为单位做动态搬迁疏散

map迭代器遍历bucket数组，按照遍历顺序返回key。为了维护迭代语义，我们不会移动bucket中的key.
当扩容时，迭代器仍然遍历旧的bucket数组，当遇到被标记为"转移"的buket时需要去新的bucket中遍历